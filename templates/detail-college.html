{% extends 'base.html' %}
{% block title %}Detail College - Detail College Data{% endblock %}
{% block listupper %}Detail College{% endblock %}
{% block hsixupper %}Detail College List{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('https://images.unsplash.com/photo-1592930954854-7d00c87d0cf4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80'); background-position-y: 50%;">
    <span class="mask bg-gradient-primary opacity-6"></span>
  </div>
  <div class="card  card-body blur shadow-blur mx-4 mt-n6 overflow-hidden text-dark">
    <div class="row gx-4">
      <div class="col-auto">
        <div class="avatar avatar-xl position-relative ">
          <img src="https://api-frontend.kemdikbud.go.id/v2/detail_pt_logo/{{ college_id }}" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
        </div>
      </div>
      <div class="col-auto my-auto text-dark">
        <div class="h-100">
          <table>
            <tr>
              <td class="mb-1 font-weight-bold text-dark">
                {{ college_details.get('nm_lemb', 'No College Selected') }}
              </td>
            </tr>
            <tr>
              <td class="mb-0 text-sm text-dark">
                {{ college_details.nama_rektor }}
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid py-4">
  <div class="row">
    <div class="col-md-9">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <div class="row">
            <div class="col-md-8 d-flex align-items-center">
              <h6 class="mb-0">College Information</h6>
            </div>
            <div class="col-md-4 text-end">
              <i class="fas fa-user text-secondary text-sm"></i>
            </div>
          </div>
        </div>
        <div class="card-body p-3">
          <table>
            <tr>
              <td>College</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.nm_lemb }}</td>
            </tr>
            <tr>
              <td>NPSN</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.npsn }}</td>
            </tr>
            <tr>
              <td>Accreditation</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.akreditasi_list[0].akreditasi }}</td>
            </tr>
            <tr>
              <td>Accreditation Date</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.akreditasi_list[0].tgl_akreditasi }}</td>
            </tr>
            <tr>
              <td>Validity Date</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.akreditasi_list[0].tgl_berlaku }}</td>
            </tr>
            <tr>
              <td>College Status</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.stat_sp }}</td>
            </tr>
            <tr>
              <td>Established Date</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.tgl_berdiri }}</td>
            </tr>
            <tr>
              <td>SK of College</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.sk_pendirian_sp }}</td>
            </tr>
            <tr>
              <td>Date SK of College</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.tgl_sk_pendirian_sp }}</td>
            </tr>
            <tr>
              <td>Total Fields Study</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ sum_details.jumlah_bidangilmu }}</td>
            </tr>
            <tr>
              <td>Total Faculties</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ sum_details.jumlah_fakultas }}</td>
            </tr>
            <tr>
              <td>Total Study Programs</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ sum_details.jumlah_prodi }}</td>
            </tr>
            <tr>
              <td>Street</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.jln }}</td>
            </tr>
            <tr>
              <td>Regency/City</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.nama_wil }}</td>
            </tr>
            <tr>
              <td>Postal Code</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.kode_pos }}</td>
            </tr>
            <tr>
              <td>Telephone Number</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.no_tel }}</td>
            </tr>
            <tr>
              <td>Fax Number</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.no_fax }}</td>
            </tr>
            <tr>
              <td>E-mail</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.email }}</td>
            </tr>
            <tr>
              <td>Website</td>
              <td>&nbsp;:&nbsp;</td>
              <td>{{ college_details.website }}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card mb-4">
        <div class="card-header pb-0 p-3">
          <div class="row">
            <div class="col-md-12 d-flex align-items-center">
              <h6 class="mb-0">Total Accreditation of SP</h6>
            </div>
          </div>
        </div>
        <div class="card-body p-3">
          <div class="chart">
            <canvas id="doughnut-chart" class="chart-canvas" height="200px"></canvas>
          </div>
        </div>
      </div>
      <div class="card mb-4">
        <div class="card-header pb-0 p-3">
          <div class="row">
            <div class="col-md-12 d-flex align-items-center">
              <h6 class="mb-0">Students : Lecturer</h6>
            </div>
          </div>
        </div>
        <div class="card-body p-3">
          <div class="chart">
            <canvas id="pie-chart" class="chart-canvas" height="200px"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12 mt-4">
    <div class="card card-frame">
      <div class="card-header pb-0 p-3">
        <h6 class="mb-1">Permanent Lecturer</h6>
      </div>
      <div class="card-body p-3">
        <!-- Nesting four vertical cards (col-md-3) inside the main card -->
        <div class="row">
          <div class="col-md-3">
            <div class="card">
              <div class="card-header pb-0 p-3">
                Number of Positions
              </div>
              <div class="card-body p-3">
                <div class="chart">
                  <canvas id="tetap-jumlah-jabatan" class="chart-canvas" height="200px"></canvas>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card">
              <div class="card-header pb-0 p-3">
                Card 2
              </div>
              <div class="card-body p-3">
                Content for Card 2
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card">
              <div class="card-header pb-0 p-3">
                Card 3
              </div>
              <div class="card-body p-3">
                Content for Card 3
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card">
              <div class="card-header pb-0 p-3">
                Card 4
              </div>
              <div class="card-body p-3">
                Content for Card 4
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <div class="col-12 mt-4">
    <div class="card mb-4">
      <div class="card-header pb-0 p-3">
        <h6 class="mb-1">Study Programs at {{ college_details.nm_lemb }}</h6>
        <p class="text-sm mb-0">Student data is based on student activity reporting in the academic year. If it is not appropriate, universities are required to improve their reporting through the PDDikti Feeder
          Prodi application with red writing: study programs with less than 5 homebase lecturers and/or NIDN less than 60%
        </p>
      </div>
      <div class="card-body p-3">
        <div class="table-responsive">
          <table class="table table-flush" id="datatable-basic">
            <thead class="thead-light">
              <tr>
                <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7">SP Code</th>
                <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7">SP Name</th>
                <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7">SP Status</th>
                <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7">Level</th>
                <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7">Grade</th>
                <th class="text-uppercase text-secondary text-sm font-weight-bolder opacity-7"></th>
              </tr>
            </thead>
            <tbody>
              {% for sp_detail in sp_details %}
              <tr>
                <td class="text-sm font-weight-normal">{{ sp_detail.kode_prodi }}</td>
                <td class="text-sm font-weight-normal">{{ sp_detail.nm_lemb }}</td>
                <td class="text-sm font-weight-normal">{{ sp_detail.stat_prodi }}</td>
                <td class="text-sm font-weight-normal">{{ sp_detail.jenjang }}</td>
                <td class="text-sm font-weight-normal">{{ sp_detail.akreditas }}</td>
                <td class="text-sm font-weight-normal align-middle"><a href="/detail-sp{{ sp_detail.id_sms }}"><i class="fa-solid fa-magnifying-glass"></i></a></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<footer class="footer py-4  ">
  <div class="container-fluid">
    <div class="row align-items-center justify-content-lg-between">
      <div class="col-lg-6 mb-lg-0 mb-4">
        <div class="copyright text-center text-sm text-muted text-lg-start">
          © <script>
            document.write(new Date().getFullYear())
          </script>,
          made with <i class="fa fa-heart"></i> by
          <a href="https://www.creative-tim.com" class="font-weight-bold" target="_blank">Creative Tim</a>
          for a better web.
        </div>
      </div>
      <div class="col-lg-6">
        <ul class="nav nav-footer justify-content-center justify-content-lg-end">
          <li class="nav-item">
            <a href="#" class="nav-link text-muted" target="_blank">RidwaanHall</a>
          </li>
          <li class="nav-item">
            <a href="https://www.instagram.com/ridwaanhall" class="nav-link text-muted" target="_blank">Instagram</a>
          </li>
          <li class="nav-item">
            <a href=https://github.com/ridwaanhall" class="nav-link text-muted" target="_blank">Github</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link pe-0 text-muted" target="_blank">License</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>
{% endblock %}
{% block settings %}
<div class="fixed-plugin">
  <a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
  <i class="material-icons py-2">settings</i>
  </a>
  <div class="card shadow-lg">
    <div class="card-header pb-0 pt-3">
      <div class="float-start">
        <h5 class="mt-3 mb-0">Configurator</h5>
        <p>See our dashboard options.</p>
      </div>
      <div class="float-end mt-4">
        <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
        <i class="material-icons">clear</i>
        </button>
      </div>
      <!-- End Toggle Button -->
    </div>
    <hr class="horizontal dark my-1">
    <div class="card-body pt-sm-3 pt-0">
      <!-- Sidebar Backgrounds -->
      <div>
        <h6 class="mb-0">Sidebar Colors</h6>
      </div>
      <a href="javascript:void(0)" class="switch-trigger background-color">
        <div class="badge-colors my-2 text-start">
          <span class="badge filter bg-gradient-primary active" data-color="primary" onclick="sidebarColor(this)"></span>
          <span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
          <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
          <span class="badge filter bg-gradient-success" data-color="success" onclick="sidebarColor(this)"></span>
          <span class="badge filter bg-gradient-warning" data-color="warning" onclick="sidebarColor(this)"></span>
          <span class="badge filter bg-gradient-danger" data-color="danger" onclick="sidebarColor(this)"></span>
        </div>
      </a>
      <!-- Sidenav Type -->
      <div class="mt-3">
        <h6 class="mb-0">Sidenav Type</h6>
        <p class="text-sm">Choose between 2 different sidenav types.</p>
      </div>
      <div class="d-flex">
        <button class="btn bg-gradient-dark px-3 mb-2 active" data-class="bg-gradient-dark" onclick="sidebarType(this)">Dark</button>
        <button class="btn bg-gradient-dark px-3 mb-2 ms-2" data-class="bg-transparent" onclick="sidebarType(this)">Transparent</button>
        <button class="btn bg-gradient-dark px-3 mb-2 ms-2" data-class="bg-white" onclick="sidebarType(this)">White</button>
      </div>
      <p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
      <!-- Navbar Fixed -->
      <div class="mt-3 d-flex">
        <h6 class="mb-0">Navbar Fixed</h6>
        <div class="form-check form-switch ps-0 ms-auto my-auto">
          <input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
        </div>
      </div>
      <hr class="horizontal dark my-3">
      <div class="mt-2 d-flex">
        <h6 class="mb-0">Light / Dark</h6>
        <div class="form-check form-switch ps-0 ms-auto my-auto">
          <input class="form-check-input mt-1 ms-auto" type="checkbox" id="dark-version" onclick="darkMode(this)">
        </div>
      </div>
      <hr class="horizontal dark my-sm-4">
    </div>
  </div>
</div>
{% endblock %}
{% block chart_college %}
<script type="text/javascript">
  // Doughnut chart
  var ctx3 = document.getElementById("doughnut-chart").getContext("2d");
  var akreditasiKeys = {{ akreditasi_keys | tojson | safe }};
  var akreditasiValues = {{ akreditasi_values | tojson | safe }};
  new Chart(ctx3, {
    type: "doughnut",
    data: {
      labels: akreditasiKeys,
      datasets: [{
        label: "Projects",
        weight: 9,
        cutout: 60,
        tension: 0.9,
        pointRadius: 2,
        borderWidth: 2,
        backgroundColor: ['#03a9f4', '#3A416F', '#fb8c00', '#a8b8d8', '#e3316e'],
        data: akreditasiValues,
        fill: false
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: false,
        }
      },
      interaction: {
        intersect: false,
        mode: 'index',
      },
      scales: {
        y: {
          grid: {
            drawBorder: false,
            display: false,
            drawOnChartArea: false,
            drawTicks: false,
          },
          ticks: {
            display: false
          }
        },
        x: {
          grid: {
            drawBorder: false,
            display: false,
            drawOnChartArea: false,
            drawTicks: false,
          },
          ticks: {
            display: false,
          }
        },
      },
    },
  });
  
  // Pie chart
  var ctx4 = document.getElementById("pie-chart").getContext("2d");
  var dosenValue = {{ dosen_value }};
  var mahasiswaValue = {{ mahasiswa_value }};
  new Chart(ctx4, {
    type: "pie",
    data: {
      labels: ['Student', 'Lectuer'],
      datasets: [{
        label: "Projects",
        weight: 9,
        cutout: 0,
        tension: 0.9,
        pointRadius: 2,
        borderWidth: 2,
        backgroundColor: ['#17c1e8', '#e3316e'],
        data: [mahasiswaValue, dosenValue],
        fill: false
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: false,
        }
      },
      interaction: {
        intersect: false,
        mode: 'index',
      },
      scales: {
        y: {
          grid: {
            drawBorder: false,
            display: false,
            drawOnChartArea: false,
            drawTicks: false,
          },
          ticks: {
            display: false
          }
        },
        x: {
          grid: {
            drawBorder: false,
            display: false,
            drawOnChartArea: false,
            drawTicks: false,
          },
          ticks: {
            display: false,
          }
        },
      },
    },
  });

  // jumlah jabatan
  var ctx3 = document.getElementById("tetap-jumlah-jabatan").getContext("2d");
  var tetap_jumlah_jabatanKeys = {{ tetap_jumlah_jabatan_keys | tojson | safe }};
  var tetap_jumlah_jabatanValues = {{ tetap_jumlah_jabatan_values | tojson | safe }};
  new Chart(ctx3, {
    type: "doughnut",
    data: {
      labels: tetap_jumlah_jabatanKeys,
      datasets: [{
        label: "Projects",
        weight: 9,
        cutout: 60,
        tension: 0.9,
        pointRadius: 2,
        borderWidth: 2,
        backgroundColor: ['#03a9f4', '#3A416F', '#fb8c00', '#a8b8d8', '#e3316e'],
        data: tetap_jumlah_jabatanValues,
        fill: false
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          display: false,
        }
      },
      interaction: {
        intersect: false,
        mode: 'index',
      },
      scales: {
        y: {
          grid: {
            drawBorder: false,
            display: false,
            drawOnChartArea: false,
            drawTicks: false,
          },
          ticks: {
            display: false
          }
        },
        x: {
          grid: {
            drawBorder: false,
            display: false,
            drawOnChartArea: false,
            drawTicks: false,
          },
          ticks: {
            display: false,
          }
        },
      },
    },
  });
  
</script>
{% endblock %}